<xml xmlns="http://www.w3.org/1999/xhtml" collection="false">
 <variables>
  <variable id="starting_stake">Starting Stake</variable>
  <variable id="current_stake">Current Stake</variable>
  <variable id="win_streak">Win Streak</variable>
  <variable id="total_profit">Total Profit</variable>
  <variable id="last_profit">Last Profit</variable>
  <variable id="max_stake">Max Stake</variable>
  <variable id="daily_profit_target">Daily Profit Target</variable>
  <variable id="daily_stop_loss">Daily Stop Loss</variable>
  <variable id="partial_profit_threshold">Partial Profit Threshold</variable>
</variables>

<block type="trade">
  <field name="MARKET">volidx</field>
  <field name="SUBMARKET">random_index</field>
  <field name="SYMBOL">R_50</field>
  <field name="TRADETYPECAT">digits</field>
  <field name="TRADETYPE">matchesdiffers</field>
  <field name="TYPE">DIGITDIFF</field>
  <field name="CANDLEINTERVAL">60</field>
  <statement name="INITIALIZATION">
    <block type="variables_set">
      <field name="VAR">Starting Stake</field>
      <value>
        <block type="math_number">
          <field name="NUM">0.35</field>
        </block>
      </value>
    </block>
    <block type="variables_set">
      <field name="VAR">Current Stake</field>
      <value>
        <block type="variables_get">
          <field name="VAR">Starting Stake</field>
        </block>
      </value>
    </block>
    <block type="variables_set">
      <field name="VAR">Win Streak</field>
      <value>
        <block type="math_number">
          <field name="NUM">0</field>
        </block>
      </value>
    </block>
    <block type="variables_set">
      <field name="VAR">Total Profit</field>
      <value>
        <block type="math_number">
          <field name="NUM">0</field>
        </block>
      </value>
    </block>
    <block type="variables_set">
      <field name="VAR">Max Stake</field>
      <value>
        <block type="math_number">
          <field name="NUM">5</field>
        </block>
      </value>
    </block>
    <block type="variables_set">
      <field name="VAR">Daily Profit Target</field>
      <value>
        <block type="math_number">
          <field name="NUM">10</field>
        </block>
      </value>
    </block>
    <block type="variables_set">
      <field name="VAR">Daily Stop Loss</field>
      <value>
        <block type="math_number">
          <field name="NUM">-5</field>
        </block>
      </value>
    </block>
    <block type="variables_set">
      <field name="VAR">Partial Profit Threshold</field>
      <value>
        <block type="math_number">
          <field name="NUM">2</field>
        </block>
      </value>
    </block>
  </statement>
  <statement name="TRADE">
    <block type="controls_if">
      <value name="IF0">
        <block type="logic_operation">
          <field name="OP">AND</field>
          <value name="A">
            <block type="logic_compare">
              <field name="OP">GT</field>
              <value name="A">
                <block type="variables_get">
                  <field name="VAR">Total Profit</field>
                </block>
              </value>
              <value name="B">
                <block type="variables_get">
                  <field name="VAR">Daily Stop Loss</field>
                </block>
              </value>
            </block>
          </value>
          <value name="B">
            <block type="logic_compare">
              <field name="OP">LT</field>
              <value name="A">
                <block type="variables_get">
                  <field name="VAR">Total Profit</field>
                </block>
              </value>
              <value name="B">
                <block type="variables_get">
                  <field name="VAR">Daily Profit Target</field>
                </block>
              </value>
            </block>
          </value>
        </block>
      </value>
      <statement name="DO0">
        <block type="variables_set">
          <field name="VAR">Current Stake</field>
          <value>
            <block type="math_min">
              <value name="A">
                <block type="variables_get">
                  <field name="VAR">Current Stake</field>
                </block>
              </value>
              <value name="B">
                <block type="variables_get">
                  <field name="VAR">Max Stake</field>
                </block>
              </value>
            </block>
          </value>
        </block>
        <block type="purchase">
          <field name="PURCHASE">DIGITDIFF</field>
        </block>
      </statement>
      <statement name="ELSE">
        <block type="text_print">
          <value name="TEXT">
            <block type="text_join">
              <mutation items="2"></mutation>
              <value name="ADD0">
                <block type="text">
                  <field name="TEXT">Trading stopped. Total Profit: </field>
                </block>
              </value>
              <value name="ADD1">
                <block type="variables_get">
                  <field name="VAR">Total Profit</field>
                </block>
              </value>
            </block>
          </value>
        </block>
      </statement>
    </block>
  </statement>
</block>

<block type="after_purchase">
  <statement name="AFTERPURCHASE">
    <block type="variables_set">
      <field name="VAR">Last Profit</field>
      <value>
        <block type="read_details">
          <field name="DETAIL_INDEX">4</field>
        </block>
      </value>
    </block>
    <block type="controls_if">
      <mutation else="1"></mutation>
      <value name="IF0">
        <block type="contract_check_result">
          <field name="CHECK_RESULT">win</field>
        </block>
      </value>
      <statement name="DO0">
        <block type="math_change">
          <field name="VAR">Win Streak</field>
          <value>
            <block type="math_number">
              <field name="NUM">1</field>
            </block>
          </value>
        </block>
        <block type="math_change">
          <field name="VAR">Total Profit</field>
          <value>
            <block type="variables_get">
              <field name="VAR">Last Profit</field>
            </block>
          </value>
        </block>
        <block type="controls_if">
          <value name="IF0">
            <block type="logic_compare">
              <field name="OP">GT</field>
              <value name="A">
                <block type="variables_get">
                  <field name="VAR">Total Profit</field>
                </block>
              </value>
              <value name="B">
                <block type="variables_get">
                  <field name="VAR">Partial Profit Threshold</field>
                </block>
              </value>
            </block>
          </value>
          <statement name="DO0">
            <block type="variables_set">
              <field name="VAR">Current Stake</field>
              <value>
                <block type="math_arithmetic">
                  <field name="OP">MULTIPLY</field>
                  <value name="A">
                    <block type="variables_get">
                      <field name="VAR">Starting Stake</field>
                    </block>
                  </value>
                  <value name="B">
                    <block type="math_number">
                      <field name="NUM">0.75</field>
                    </block>
                  </value>
                </block>
              </value>
            </block>
          </statement>
          <statement name="ELSE">
            <block type="variables_set">
              <field name="VAR">Current Stake</field>
              <value>
                <block type="math_arithmetic">
                  <field name="OP">ADD</field>
                  <value name="A">
                    <block type="variables_get">
                      <field name="VAR">Current Stake</field>
                    </block>
                  </value>
                  <value name="B">
                    <block type="variables_get">
                      <field name="VAR">Last Profit</field>
                    </block>
                  </value>
                </block>
              </value>
            </block>
          </statement>
        </block>
      </statement>
      <statement name="ELSE">
        <block type="variables_set">
          <field name="VAR">Win Streak</field>
          <value>
            <block type="math_number">
              <field name="NUM">0</field>
            </block>
          </value>
        </block>
        <block type="variables_set">
          <field name="VAR">Current Stake</field>
          <value>
            <block type="variables_get">
              <field name="VAR">Starting Stake</field>
            </block>
          </value>
        </block>
        <block type="math_change">
          <field name="VAR">Total Profit</field>
          <value>
            <block type="variables_get">
              <field name="VAR">Last Profit</field>
            </block>
          </value>
        </block>
      </statement>
    </block>
    <block type="controls_if">
      <mutation elseif="1"></mutation>
      <value name="IF0">
        <block type="logic_compare">
          <field name="OP">EQ</field>
          <value name="A">
            <block type="variables_get">
              <field name="VAR">Win Streak</field>
            </block>
          </value>
          <value name="B">
            <block type="math_number">
              <field name="NUM">10</field>
            </block>
          </value>
        </block>
      </value>
      <statement name="DO0">
        <block type="text_print">
          <value name="TEXT">
            <block type="text_join">
              <mutation items="2"></mutation>
              <value name="ADD0">
                <block type="text">
                  <field name="TEXT">Win streak target reached. Total Profit: </field>
                </block>
              </value>
              <value name="ADD1">
                <block type="variables_get">
                  <field name="VAR">Total Profit</field>
                </block>
              </value>
            </block>
          </value>
        </block>
      </statement>
      <value name="IF1">
        <block type="logic_operation">
          <field name="OP">AND</field>
          <value name="A">
            <block type="logic_compare">
              <field name="OP">GT</field>
              <value name="A">
                <block type="variables_get">
                  <field name="VAR">Total Profit</field>
                </block>
              </value>
              <value name="B">
                <block type="variables_get">
                  <field name="VAR">Daily Stop Loss</field>
                </block>
              </value>
            </block>
          </value>
          <value name="B">
            <block type="logic_compare">
              <field name="OP">LT</field>
              <value name="A">
                <block type="variables_get">
                  <field name="VAR">Total Profit</field>
                </block>
              </value>
              <value name="B">
                <block type="variables_get">
                  <field name="VAR">Daily Profit Target</field>
                </block>
              </value>
            </block>
          </value>
        </block>
      </value>
      <statement name="DO1">
        <block type="trade_again"></block>
      </statement>
    </block>
  </statement>
</block> x="193" y="2515"></block>
</xml>
